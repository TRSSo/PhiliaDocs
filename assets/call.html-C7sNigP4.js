import{_ as r}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as k,a as h,d,b as i,w as t,e as l,r as p,o as u}from"./app-Bhrl3aEc.js";const A={};function o(g,s){const n=p("Tabs");return u(),k("div",null,[s[16]||(s[16]=h('<h2 id="基本参数" tabindex="-1"><a class="header-anchor" href="#基本参数"><span>基本参数</span></a></h2><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>string</td><td>调用唯一标识符（推荐 ULID）</td></tr><tr><td>code</td><td>number</td><td>调用类型码</td></tr></tbody></table><h2 id="_0-请求" tabindex="-1"><a class="header-anchor" href="#_0-请求"><span>0. 请求</span></a></h2><p>发起一个请求</p>',4)),d(n,{data:[{id:"定义"},{id:"示例"}]},{title0:t(({value:a,isActive:e})=>[...s[0]||(s[0]=[l("定义",-1)])]),title1:t(({value:a,isActive:e})=>[...s[1]||(s[1]=[l("示例",-1)])]),tab0:t(({value:a,isActive:e})=>[...s[2]||(s[2]=[i("table",null,[i("thead",null,[i("tr",null,[i("th",null,"参数名"),i("th",null,"类型"),i("th",null,"描述")])]),i("tbody",null,[i("tr",null,[i("td",null,"code"),i("td",null,"0"),i("td",null,"请求码")]),i("tr",null,[i("td",null,"name"),i("td",null,"string"),i("td",null,"请求调用的方法名")]),i("tr",null,[i("td",null,"data?"),i("td",null,"请求方法提供"),i("td",null,"请求的参数")])])],-1)])]),tab1:t(({value:a,isActive:e})=>[...s[3]||(s[3]=[i("div",{class:"language-js line-numbers-mode","data-highlighter":"shiki","data-ext":"js",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[i("code",{class:"language-js"},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"{")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#E06C75"}},"  id"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},": "),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"01JSRMV07VY3B4H227FYWEMKM9"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},",")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#E06C75"}},"  code"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},": "),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"0"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},",")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#E06C75"}},"  name"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},": "),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"getUserInfo"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},",")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#E06C75"}},"  data"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},": {")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#E06C75"}},"    id"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},": "),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"1234567890"')]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"  }")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"}")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1)])]),_:1}),s[17]||(s[17]=i("h2",{id:"_1-响应",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#_1-响应"},[i("span",null,"1. 响应")])],-1)),s[18]||(s[18]=i("p",null,"请求处理响应（请求完成）",-1)),d(n,{data:[{id:"定义"},{id:"示例"}]},{title0:t(({value:a,isActive:e})=>[...s[4]||(s[4]=[l("定义",-1)])]),title1:t(({value:a,isActive:e})=>[...s[5]||(s[5]=[l("示例",-1)])]),tab0:t(({value:a,isActive:e})=>[...s[6]||(s[6]=[i("table",null,[i("thead",null,[i("tr",null,[i("th",null,"参数名"),i("th",null,"类型"),i("th",null,"描述")])]),i("tbody",null,[i("tr",null,[i("td",null,"code"),i("td",null,"1"),i("td",null,"响应码")]),i("tr",null,[i("td",null,"data?"),i("td",null,"请求方法提供"),i("td",null,"响应的结果")])])],-1)])]),tab1:t(({value:a,isActive:e})=>[...s[7]||(s[7]=[i("div",{class:"language-js line-numbers-mode","data-highlighter":"shiki","data-ext":"js",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[i("code",{class:"language-js"},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"{")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#E06C75"}},"  id"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},": "),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"01JSRMV07VY3B4H227FYWEMKM9"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},",")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#E06C75"}},"  code"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},": "),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"1"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},",")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#E06C75"}},"  data"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},": {")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#E06C75"}},"    id"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},": "),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"1234567890"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},",")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#E06C75"}},"    name"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},": "),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"匿名用户"')]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"  }")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"}")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1)])]),_:1}),s[19]||(s[19]=i("h2",{id:"_2-正在执行",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#_2-正在执行"},[i("span",null,"2. 正在执行")])],-1)),s[20]||(s[20]=i("p",null,[l("已收到请求，正在执行（请求"),i("strong",null,"未完成"),l("）")],-1)),d(n,{data:[{id:"定义"},{id:"示例"}]},{title0:t(({value:a,isActive:e})=>[...s[8]||(s[8]=[l("定义",-1)])]),title1:t(({value:a,isActive:e})=>[...s[9]||(s[9]=[l("示例",-1)])]),tab0:t(({value:a,isActive:e})=>[...s[10]||(s[10]=[i("table",null,[i("thead",null,[i("tr",null,[i("th",null,"参数名"),i("th",null,"类型"),i("th",null,"描述")])]),i("tbody",null,[i("tr",null,[i("td",null,"code"),i("td",null,"2"),i("td",null,"正在执行码")]),i("tr",null,[i("td",null,"time?"),i("td",null,"number"),i("td",null,"请求超时")])])],-1)])]),tab1:t(({value:a,isActive:e})=>[...s[11]||(s[11]=[i("div",{class:"language-js line-numbers-mode","data-highlighter":"shiki","data-ext":"js",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[i("code",{class:"language-js"},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"{")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#E06C75"}},"  id"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},": "),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"01JSRMV07VY3B4H227FYWEMKM9"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},",")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#E06C75"}},"  code"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},": "),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"2")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"}")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1)])]),_:1}),s[21]||(s[21]=i("h2",{id:"_3-错误",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#_3-错误"},[i("span",null,"3. 错误")])],-1)),s[22]||(s[22]=i("p",null,"请求处理错误（请求完成）",-1)),d(n,{data:[{id:"定义"},{id:"示例"}]},{title0:t(({value:a,isActive:e})=>[...s[12]||(s[12]=[l("定义",-1)])]),title1:t(({value:a,isActive:e})=>[...s[13]||(s[13]=[l("示例",-1)])]),tab0:t(({value:a,isActive:e})=>[...s[14]||(s[14]=[i("table",null,[i("thead",null,[i("tr",null,[i("th",null,"参数名"),i("th",null,"类型"),i("th",null,"描述")])]),i("tbody",null,[i("tr",null,[i("td",null,"code"),i("td",null,"3"),i("td",null,"错误码")]),i("tr",null,[i("td",null,"data"),i("td",null,"object"),i("td",null,"错误对象")]),i("tr",null,[i("td",null,"data.name"),i("td",null,"string"),i("td",null,"错误名称")]),i("tr",null,[i("td",null,"data.message"),i("td",null,"string"),i("td",null,"错误信息")]),i("tr",null,[i("td",null,"data.error?"),i("td",null,"string"),i("td",null,"错误堆栈")])])],-1)])]),tab1:t(({value:a,isActive:e})=>[...s[15]||(s[15]=[i("div",{class:"language-js line-numbers-mode","data-highlighter":"shiki","data-ext":"js",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[i("code",{class:"language-js"},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"{")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#E06C75"}},"  id"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},": "),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"01JSRMV07VY3B4H227FYWEMKM9"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},",")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#E06C75"}},"  code"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},": "),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}},"3"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},",")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#E06C75"}},"  data"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},": {")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#E06C75"}},"    name"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},": "),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"NotFoundError"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},",")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#E06C75"}},"    message"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},": "),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"用户不存在"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},",")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#E06C75"}},"    error"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},": "),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"NotFoundError: 用户不存在'),i("span",{style:{"--shiki-light":"#0184BC","--shiki-dark":"#56B6C2"}},"\\n"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'    at makeError (/root/Philia/src/util/common.ts:12:24)"')]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"  }")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"}")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1)])]),_:1}),s[23]||(s[23]=h('<h2 id="⏰-超时处理" tabindex="-1"><a class="header-anchor" href="#⏰-超时处理"><span>⏰ 超时处理</span></a></h2><p>默认定义的超时值</p><table><thead><tr><th>参数名</th><th>默认值</th><th>描述</th></tr></thead><tbody><tr><td>send</td><td>5秒</td><td>发送</td></tr><tr><td>wait</td><td>1分钟</td><td>等待</td></tr><tr><td>idle</td><td>5分钟</td><td>空闲</td></tr><tr><td>retry</td><td>3次</td><td>重试</td></tr></tbody></table><p>请求发起5秒(send)内，必须收到响应，若收到 <a href="#_2-%E6%AD%A3%E5%9C%A8%E6%89%A7%E8%A1%8C">2. 正在执行</a> 则按其超时时间处理，默认1分钟(wait)。</p><p>所以为避免超时，不能立即处理完成的方法，必须先发送 <a href="#_2-%E6%AD%A3%E5%9C%A8%E6%89%A7%E8%A1%8C">2. 正在执行</a> 再执行。</p><p>在 TypeScript 实现中：</p><ul><li>请求同步方法 → <a href="#_1-%E5%93%8D%E5%BA%94">1. 响应</a></li><li>请求异步方法 → <a href="#_2-%E6%AD%A3%E5%9C%A8%E6%89%A7%E8%A1%8C">2. 正在执行</a> → <a href="#_1-%E5%93%8D%E5%BA%94">1. 响应</a></li></ul><p>超时会触发重试机制，客户端会缓存请求的结果5分钟(idle)，遇到请求重试，则返回缓存结果。</p><h2 id="💓-心跳" tabindex="-1"><a class="header-anchor" href="#💓-心跳"><span>💓 心跳</span></a></h2><p>心跳包，用于检测连接是否正常，默认5分钟(idle)请求一次 <code>heartbeat</code> 方法，该方法无响应结果。</p><h2 id="📝-获取可用方法" tabindex="-1"><a class="header-anchor" href="#📝-获取可用方法"><span>📝 获取可用方法</span></a></h2><table><thead><tr><th>方法名</th><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td><code>getHandleList</code></td><td>string[]</td><td>获取所有方法名</td></tr></tbody></table>',12))])}const b=r(A,[["render",o]]),m=JSON.parse('{"path":"/dev/call.html","title":"调用协议","lang":"zh-CN","frontmatter":{"title":"调用协议","icon":"code","order":4,"category":["开发指南"],"description":"基本参数 0. 请求 发起一个请求 1. 响应 请求处理响应（请求完成） 2. 正在执行 已收到请求，正在执行（请求未完成） 3. 错误 请求处理错误（请求完成） ⏰ 超时处理 默认定义的超时值 请求发起5秒(send)内，必须收到响应，若收到 2. 正在执行 则按其超时时间处理，默认1分钟(wait)。 所以为避免超时，不能立即处理完成的方法，必须先...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"调用协议\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-08-24T13:08:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"🌌\\",\\"url\\":\\"https://github.com/TimeRainStarSky\\"}]}"],["meta",{"property":"og:url","content":"https://pg.trss.me/dev/call.html"}],["meta",{"property":"og:site_name","content":"菲莉娅 Philia"}],["meta",{"property":"og:title","content":"调用协议"}],["meta",{"property":"og:description","content":"基本参数 0. 请求 发起一个请求 1. 响应 请求处理响应（请求完成） 2. 正在执行 已收到请求，正在执行（请求未完成） 3. 错误 请求处理错误（请求完成） ⏰ 超时处理 默认定义的超时值 请求发起5秒(send)内，必须收到响应，若收到 2. 正在执行 则按其超时时间处理，默认1分钟(wait)。 所以为避免超时，不能立即处理完成的方法，必须先..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-08-24T13:08:38.000Z"}],["meta",{"property":"article:modified_time","content":"2025-08-24T13:08:38.000Z"}]]},"git":{"createdTime":1756040918000,"updatedTime":1756040918000,"contributors":[{"name":"🌌","username":"","email":"Time.Rain.Star.Sky@Gmail.com","commits":1}]},"readingTime":{"minutes":1.84,"words":551},"filePathRelative":"dev/call.md","autoDesc":true}');export{b as comp,m as data};
