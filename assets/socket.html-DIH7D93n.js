import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,a,o}from"./app-Bhrl3aEc.js";const s={};function n(c,e){return o(),t("div",null,[...e[0]||(e[0]=[a('<p>使用 Socket 协议作为默认通信协议。</p><h2 id="通信路径定义" tabindex="-1"><a class="header-anchor" href="#通信路径定义"><span>通信路径定义</span></a></h2><p>客户端连接时提供 <code>项目路径</code>+<code>应用协议</code></p><ul><li>Linux: <code>\\0项目路径/应用协议</code></li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>␀/home/user/project/philia</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Windows: <code>\\\\?\\pipe\\项目路径\\应用协议</code></li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>\\\\?\\pipe\\D:\\project\\philia</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>其他如 macOS 保持原样</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>/home/user/project/philia</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="编码长度" tabindex="-1"><a class="header-anchor" href="#编码长度"><span>编码长度</span></a></h2><p>由于 TCP 粘包问题，Socket 协议规定了编码长度，拼接在编码数据前。</p><p>实际发送数据：长度<code>n(UInt32BE)</code>+数据<code>n字节</code></p><p>因此一个数据包的最大长度为<code>4GB(2³²-1)</code>，如果发送的数据包长度超过 4GB，会分片处理，规则：</p><ol><li>单块：长度<code>4294967295(2³²-1)</code>+数据<code>4GB(2³²-1)</code>，最后一块：长度<code>n(UInt32BE)</code>+<code>数据 n字节</code></li><li>接收端收到时检测到长度<code>4GB(2³²-1)</code>，则认为数据包已分片，并继续读取数据</li><li>直到读取到长度非<code>4GB(2³²-1)</code>，则数据包已接收完成，将所有接收数据拼接并解码</li></ol><div class="hint-container important"><p class="hint-container-title">重要</p><p>如果数据正好为<code>4GB(2³²-1)</code>的整数倍，则最后一块为 长度<code>0(UInt32BE)</code>无数据，请确保能正确处理。</p></div>',15)])])}const l=i(s,[["render",n]]),p=JSON.parse('{"path":"/dev/comm/socket.html","title":"Socket 协议","lang":"zh-CN","frontmatter":{"title":"Socket 协议","icon":"code","order":2,"category":["开发指南","通信协议"],"description":"使用 Socket 协议作为默认通信协议。 通信路径定义 客户端连接时提供 项目路径+应用协议 Linux: \\\\0项目路径/应用协议 Windows: \\\\\\\\?\\\\pipe\\\\项目路径\\\\应用协议 其他如 macOS 保持原样 编码长度 由于 TCP 粘包问题，Socket 协议规定了编码长度，拼接在编码数据前。 实际发送数据：长度n(UInt32BE)+数据...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Socket 协议\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-08-24T13:08:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"🌌\\",\\"url\\":\\"https://github.com/TimeRainStarSky\\"}]}"],["meta",{"property":"og:url","content":"https://pg.trss.me/dev/comm/socket.html"}],["meta",{"property":"og:site_name","content":"菲莉娅 Philia"}],["meta",{"property":"og:title","content":"Socket 协议"}],["meta",{"property":"og:description","content":"使用 Socket 协议作为默认通信协议。 通信路径定义 客户端连接时提供 项目路径+应用协议 Linux: \\\\0项目路径/应用协议 Windows: \\\\\\\\?\\\\pipe\\\\项目路径\\\\应用协议 其他如 macOS 保持原样 编码长度 由于 TCP 粘包问题，Socket 协议规定了编码长度，拼接在编码数据前。 实际发送数据：长度n(UInt32BE)+数据..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-08-24T13:08:38.000Z"}],["meta",{"property":"article:modified_time","content":"2025-08-24T13:08:38.000Z"}]]},"git":{"createdTime":1756040918000,"updatedTime":1756040918000,"contributors":[{"name":"🌌","username":"","email":"Time.Rain.Star.Sky@Gmail.com","commits":1}]},"readingTime":{"minutes":0.98,"words":293},"filePathRelative":"dev/comm/socket.md","autoDesc":true}');export{l as comp,p as data};
